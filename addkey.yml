---
#to use this playbook just lanch the commande ansible-playbook -i inventory addkey.yml --ask-passssh 

- name: push public key on all servers
  hosts: "{{ host_name }}"
  remote_user: "{{ remote_user }}"
  #become: yes
  #become_method: "sudo"

  tasks:
  - name: Set authorized key taken from file
    authorized_key:
       user: "{{ remote_user }}"
       state: present
       key: "{{ lookup('file', '~/.ssh/id_rsa.pub') }}"